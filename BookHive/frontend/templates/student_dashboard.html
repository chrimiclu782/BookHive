<!DOCTYPE html>
<html>
<head>
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Welcome, Student</h1>
        <a href="/logout">Logout</a> | <a href="/order_book">Order a Book</a>

        <h2>Available Books</h2>
        <table>
            <tr><th>Title</th><th>Author</th><th>Shelf</th><th>Available</th><th>Action</th></tr>
            {% for book in books %}
            <tr>
                <td>{{ book.title }}</td>
                <td>{{ book.author }}</td>
                <td>{{ book.shelf_location }}</td>
                <td>{{ book.available_copies }}</td>
                <td>
                    {% if book.available_copies > 0 %}
                        <a href="/borrow/{{ book.book_id }}">Borrow</a>
                    {% else %} N/A {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>

        <h2>Borrowed Books</h2>
        <table>
            <tr><th>Title</th><th>Due Date</th><th>Status</th><th>Fine</th></tr>
            {% for b in borrowed %}
            <tr>
                <td>{{ b.book.title }}</td>
                <td>{{ b.due_date.strftime('%Y-%m-%d') }}</td>
                <td>{{ b.status }}</td>
                <td>{{ b.fine }}</td>
            </tr>
            {% endfor %}
        </table>

        <h2>Pending Payments</h2>
        <table>
            <tr><th>Type</th><th>Amount</th><th>Action</th></tr>
            {% for p in payments %}
                <tr>
                    <td>{{ p.type }}</td>
                    <td>â‚±{{ p.amount }}</td>
                    <td>
                        {% if not p.paid_date %}
                            <a href="/pay/{{ p.payment_id }}">Pay</a>
                        {% else %}
                            Paid
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>

        <h2>Orders</h2>
        <table>
            <tr><th>Title</th><th>Author</th><th>Status</th></tr>
            {% for o in orders %}
            <tr>
                <td>{{ o.book_title }}</td>
                <td>{{ o.book_author }}</td>
                <td>{{ o.status }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
